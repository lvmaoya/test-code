<html>
  <head>
     <style>
	    .item .item {
		   border: 1px solid black;
		   background-color: #e6e6e6;
		   margin: 10px;
		   display: block;
		   width: 100%;
		   padding: .75rem 1.25rem;
		}
		
		.item .item .item {
		   background-color: #cccccc;
		}
		
		.item .item .item .item {
		   background-color: #b3b3b3;
		}
		
		/* .item .item-x {
		   width: 20%;
		} */
	 </style>
  </head>
  <body>
	 <div>
	    <div class="item">
			<div class="item">
                <div>
                    item 1
                </div>
            </div>
			<div class="item">
                <div>
                    item 2
                </div>
            </div>
			<div class="item item-x">item 3</div>
			<div class="item item-x">item 4</div>
			<div class="item item-x">item 5</div>
			<div class="item">
			    <div class="item">
					<div class="item">item 6.1.2</div>
					<div class="item">item 6.1.3</div>
					<div class="item">item 6.1.4</div>
				</div>
			    <div class="item">item 6.2</div>
			</div>
			<div class="item">item 7</div>
			<div class="item">item 8</div>
		</div>
	 </div>
	 <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
     <script>
	    var items = document.querySelectorAll('.item');
        
		for (let item of items) {
			var sortable = Sortable.create(item, {
			  group: 'nested',
			  animation: 300,
			  fallbackOnBody: true,
			  swapThreshold: 0.65,
			  invertSwap: true,
              draggable: '.item',
			  direction: function(evt, target, dragEl) {
				// if (target !== null && dragEl.className.includes('item-x')) {
				// 	return 'horizontal';
				// }
			  return 'vertical';
		   }});
	   }
	   
	 </script>
  </body>
</html>